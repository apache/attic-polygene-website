<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Releasing Polygene™</title><link rel="stylesheet" type="text/css" href="css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="" /><link rel="up" href="tutorials.html" title="Tutorials" /><link rel="prev" href="community-docs.html" title="Polygene™ Documentation" /><link rel="next" href="javadocs.html" title="Javadoc" />


<!-- favicon -->

<link rel="shortcut icon" href="http://polygene.apache.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://polygene.apache.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/polygene.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>

<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Apache Polygene WebSite Progressive Enhancement -->

<link href="css/progressive-enhancement.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery.scrollTo-1.4.2.js"></script>
<script type="text/javascript" src="js/progressive-enhancement.js"></script>

<!-- Analytics -->
 <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-62007352-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
 </script>

  </head><body><div xmlns="" xmlns:exsl="http://exslt.org/common" class="logo"><a href="index.html"><img src="images/logo-standard.png" /></a></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="top-nav"><div xmlns="http://www.w3.org/1999/xhtml" class="toc"><dl><dt><span class="section"><a href="index.html#home">Polygene™</a></span></dt><dt><span class="section"><a href="intro.html">Introduction</a></span></dt><dt><span class="section"><span xmlns="" href="tutorials.html">Tutorials</span></span></dt><dt><span class="section"><a href="javadocs.html">Javadoc</a></span></dt><dt><span class="section"><a href="samples.html">Samples</a></span></dt><dt><span class="section"><a href="core.html">Core</a></span></dt><dt><span class="section"><a href="libraries.html">Libraries</a></span></dt><dt><span class="section"><a href="extensions.html">Extensions</a></span></dt><dt><span class="section"><a href="tools.html">Tools</a></span></dt><dt><span class="section"><a href="glossary.html">Glossary </a></span></dt></dl></div></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="sub-nav"><div xmlns="http://www.w3.org/1999/xhtml" class="toc"><dl><dt><span class="section"><a href="tutorials.html#_overview">Overview</a></span></dt><dt><span class="section"><a href="two-minutes-intro.html">Polygene™ in 2 minutes</a></span></dt><dt><span class="section"><a href="ten-minutes-intro.html">Polygene™ in 10 minutes</a></span></dt><dt><span class="section"><a href="thirty-minutes-intro.html">Polygene™ in 30 minutes</a></span></dt><dt><span class="section"><a href="howto-depend-on-polygene.html">Depend on Polygene™</a></span></dt><dt><span class="section"><a href="howto-assemble-application.html">Assemble an Application</a></span></dt><dt><span class="section"><a href="tut-composites.html">Transient Composites Tutorial</a></span></dt><dt><span class="section"><a href="tut-services.html">Services Composites Tutorial</a></span></dt><dt><span class="section"><a href="howto-contextual-fragments.html">Use contextual fragments</a></span></dt><dt><span class="section"><a href="howto-leverage-properties.html">Leverage Properties</a></span></dt><dt><span class="section"><a href="howto-create-constraint.html">Create a Constraint</a></span></dt><dt><span class="section"><a href="howto-create-concern.html">Create a Concern</a></span></dt><dt><span class="section"><a href="howto-create-sideeffect.html">Create a SideEffect</a></span></dt><dt><span class="section"><a href="howto-create-entity.html">Create an Entity</a></span></dt><dt><span class="section"><a href="howto-configure-service.html">Configure a Service</a></span></dt><dt><span class="section"><a href="howto-invocation-annotation.html">Use @Invocation</a></span></dt><dt><span class="section"><a href="build-system.html">Polygene™ Build System</a></span></dt><dt><span class="section"><a href="community-docs.html">Polygene™ Documentation</a></span></dt><dt><span class="section"><span xmlns="" href="releasing-apache.html">Releasing Polygene™</span></span></dt></dl></div></div><div class="section" title="Releasing Polygene™"><div class="titlepage"><div><div><h3 class="title"><a id="releasing-apache"></a>Releasing Polygene™</h3></div></div></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>You need a unix-like environment to actually perform the release process.
This tutorial is known to work on Linux and Mac.</p></div><p>This tutorial is intended for Apache Polygene™ commiters who want to release a new version of Apache Polygene™ (Java Edition) at The Apache Software Foundation.
It describes the tools and processes of a typical release.</p><p>It is intended to be a recommendation of best practices for the Apache Polygene™ project.
The instructions provided here are consistent with, but not a replacement for the <a class="ulink" href="https://www.apache.org/dev/release.html" target="_top">ASF Release Guidelines</a>.</p><div class="section" title="TL;DR"><div class="titlepage"><div><div><h4 class="title"><a id="_tl_dr"></a>TL;DR</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Build and publish/stage release candidate bits
</li><li class="listitem">
VOTE thread
</li><li class="listitem">
NO: clean things up
</li><li class="listitem">
YES: promote the release candidate bits as final and update all properties
</li></ul></div></div><div class="section" title="Preparing a release"><div class="titlepage"><div><div><h4 class="title"><a id="_preparing_a_release"></a>Preparing a release</h4></div></div></div><div class="section" title="Select a Release Manager"><div class="titlepage"><div><div><h5 class="title"><a id="_select_a_release_manager"></a>Select a Release Manager</h5></div></div></div><p>A Polygene committer (normally one of the development team) should post an email to the development list proposing that a release be made and nominating a release manager.
Typically, the proposer volunteers as the release manager and it passes by <a class="ulink" href="https://www.apache.org/foundation/glossary.html#LazyConsensus" target="_top">lazy consensus</a>.</p></div><div class="section" title="Clone/Checkout all repositories"><div class="titlepage"><div><div><h5 class="title"><a id="_clone_checkout_all_repositories"></a>Clone/Checkout all repositories</h5></div></div></div><p>Clone/checkout all needed repositories, next to each other:</p><pre class="programlisting brush: shell">mkdir polygene-repos
cd polygene-repos
git clone https://git-wip-us.apache.org/repos/asf/polygene-java.git polygene-java
git clone https://git-wip-us.apache.org/repos/asf/polygene-website.git polygene-website
cd polygene-website
git checkout asf-site
cd ..
svn checkout --depth empty https://dist.apache.org/repos/dist/ polygene-dist
cd polygene-dist
svn update --set-depth immediates dev
svn update --set-depth immediates release
svn update --set-depth infinity dev/polygene
svn update --set-depth infinity release/polygene
cd ..</pre><p>You should then get the following directory tree:</p><pre class="programlisting brush: text">.
└── polygene-repos
    ├── polygene-java           # Apache Polygene™ (Java Edition) source
    ├── polygene-website        # https://polygene.apache.org/ website
    └── polygene-dist
        ├── dev
        |   └── polygene        # Releases candidate distributions
        └── release
            └── polygene        # Releases distributions</pre><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>From now on, all command line snippets start from the <code class="literal">polygene-repos</code> directory.</p></div></div><div class="section" title="Build Apache Polygene™ (Java Edition)"><div class="titlepage"><div><div><h5 class="title"><a id="_build_apache_polygene_java_edition"></a>Build Apache Polygene™ (Java Edition)</h5></div></div></div><p>Ensure you can test, build Apache Polygene™ (Java Edition), including the documentation minisite generation using Asciidoc and artifact signing.</p><p>Here is what should pass before going further:</p><pre class="programlisting brush: shell">cd polygene-java
git checkout develop
./gradlew -Dversion="&lt;RELEASE-VERSION&gt;" checkDistributions</pre><p>See the <a class="link" href="build-system.html" title="Polygene™ Build System">Build System</a> tutorial for details.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Also ensure that the <a class="ulink" href="https://builds.apache.org/view/P/view/Polygene/job/Polygene(JavaEdition)-develop-java8-checkDists/" target="_top"><code class="literal">checkDists</code></a> CI build is passing.</p></div></div><div class="section" title="Install Jekyll"><div class="titlepage"><div><div><h5 class="title"><a id="_install_jekyll"></a>Install Jekyll</h5></div></div></div><p>Moreover, you will need to have a valid <a class="ulink" href="http://jekyllrb.com/" target="_top">Jekyll</a> installation as the Apache Polygene™ <a class="ulink" href="https://polygene.apache.org/" target="_top">website</a> is generated using it.</p></div><div class="section" title="Setup git flow"><div class="titlepage"><div><div><h5 class="title"><a id="_setup_git_flow"></a>Setup git flow</h5></div></div></div><p><code class="literal">git-flow</code> is a git extension that add git commands to easily use the git flow branching model the Apache Polygene™ project follows.
See the <a class="ulink" href="https://github.com/nvie/gitflow/wiki/Installation" target="_top">installation instructions</a>.</p></div><div class="section" title="Setup git signing"><div class="titlepage"><div><div><h5 class="title"><a id="_setup_git_signing"></a>Setup git signing</h5></div></div></div><p>Ensure you can sign git tags.</p><pre class="programlisting brush: shell">git config --global user.signingkey &lt;YOUR-PGP-ID&gt;</pre><p>See the <a class="ulink" href="https://git-scm.com/book/tr/v2/Git-Tools-Signing-Your-Work" target="_top">Git Tools - Signing Your Work</a> section of the Git book.</p></div><div class="section" title="Setup Apache Nexus credentials"><div class="titlepage"><div><div><h5 class="title"><a id="_setup_apache_nexus_credentials"></a>Setup Apache Nexus credentials</h5></div></div></div><p>See the Apache <a class="ulink" href="https://www.apache.org/dev/publishing-maven-artifacts.html" target="_top">Publishing Maven Artifacts</a> guide and the Apache Polygene™ (Java Edition) <a class="link" href="build-system.html" title="Polygene™ Build System">Build System</a> tutorial.</p></div><div class="section" title="Setup nodejs and NPM registry credentials"><div class="titlepage"><div><div><h5 class="title"><a id="_setup_nodejs_and_npm_registry_credentials"></a>Setup nodejs and NPM registry credentials</h5></div></div></div><p>First, <a class="ulink" href="https://nodejs.org/en/download/" target="_top">install NodeJS</a>.</p><p>If you don’t have a <code class="literal">npmjs.org</code> user yet, create one now:</p><pre class="programlisting brush: shell">npm adduser</pre><p>If your <code class="literal">npmjs.org</code> user is not registered as a maintainer for the
<a class="ulink" href="https://www.npmjs.com/package/generator-polygene" target="_top">generator-polygene</a> package, ask for the privilege on
<code class="literal">dev@polygene.apache.org</code>.</p></div><div class="section" title="Update the KEYS files if needed."><div class="titlepage"><div><div><h5 class="title"><a id="_update_the_literal_keys_literal_files_if_needed"></a>Update the <code class="literal">KEYS</code> files if needed.</h5></div></div></div><p>The reference <code class="literal">KEYS</code> file can be found at the <code class="literal">polygene-java</code> repository’s root, that is <code class="literal">polygene-java/KEYS</code>.
Ensure that it contains your public key.</p><p>Next, diff it against the ones present in the <code class="literal">dev</code> and <code class="literal">release</code> distribution areas:</p><pre class="programlisting brush: shell">diff polygene-java/KEYS polygene-dist/dev/polygene/KEYS
diff polygene-java/KEYS polygene-dist/release/polygene/KEYS</pre><p>And update them if needed:</p><pre class="programlisting brush: shell">cp polygene-java/KEYS polygene-dist/dev/polygene/KEYS
cp polygene-java/KEYS polygene-dist/release/polygene/KEYS
cd polygene-dist/dev/polygene
svn add dev/polygene/KEYS release/polygene/KEYS
svn commit -m "polygene: updating Polygene KEYS"</pre></div></div><div class="section" title="Creating a Release Candidate"><div class="titlepage"><div><div><h4 class="title"><a id="_creating_a_release_candidate"></a>Creating a Release Candidate</h4></div></div></div><div class="section" title="Resolve JIRA issues"><div class="titlepage"><div><div><h5 class="title"><a id="_resolve_jira_issues"></a>Resolve JIRA issues</h5></div></div></div><p>Resolve all issues on that version!
They can be resolved by:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
fixing
</li><li class="listitem">
marking them as <code class="literal">INVALID</code> or <code class="literal">WONTFIX</code>
</li><li class="listitem">
changing their fix version to another unreleased version
</li></ul></div><p>See the <a class="ulink" href="https://issues.apache.org/jira/browse/POLYGENE" target="_top">POLYGENE</a> project on JIRA.</p></div><div class="section" title="Prepare Release-Notes"><div class="titlepage"><div><div><h5 class="title"><a id="_prepare_release_notes"></a>Prepare Release-Notes</h5></div></div></div><p>Apache Polygene™ release-notes are generated from JIRA issues.</p><p>Open the target Polygene™ version’s release-notes in <a class="ulink" href="https://issues.apache.org/jira/browse/POLYGENE/?selectedTab=com.atlassian.jira.jira-projects-plugin:roadmap-panel" target="_top">JIRA</a> and review them.</p><p>JIRA can produces release-notes as HTML or plain-text.
Set it up to generate plain-text release-notes.</p><p>We will need these in several formats.
Starting from the plain-text one we will generate the others.</p><p>First save the text-plain release-notes in a file named <code class="literal">apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.txt</code>.
A good place for this file would be in the <code class="literal">polygene-repos</code> directory created earlier, alongside all repositories.</p><p>Convert to Asciidoc:</p><pre class="programlisting brush: shell">cat "apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.txt" | \
  sed -e "s/\[POLYGENE-\([0-9]\)*\]/https:\/\/issues.apache.org\/jira\/browse\/POLYGENE-\1[POLYGENE-\1]/" | \
  sed -e "s/    \* /- /" | sed -e "s/^\*\*/====/" \
  &gt; "apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.adoc"</pre><p>Convert to Markdown:</p><pre class="programlisting brush: shell">cat "apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.txt" | \
  sed -e "s/\[POLYGENE-\([0-9]*\)\]/[POLYGENE-\1](https:\/\/issues.apache.org\/jira\/browse\/POLYGENE-\1)/" | \
  sed -e "s/    \* /- /" | sed -e "s/^\*\*/####/" \
  &gt; "apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.md"</pre><p>You should then have the following files:</p><pre class="programlisting brush: shell">.
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.txt
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.adoc
└── apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.md</pre><p>We will use them later.</p></div><div class="section" title="Create a RC branch"><div class="titlepage"><div><div><h5 class="title"><a id="_create_a_rc_branch"></a>Create a RC branch</h5></div></div></div><p>We use <code class="literal">&lt;RELEASE-VERSION&gt;-RC#</code> where <code class="literal">RELEASE-VERSION</code> is the target release version and <code class="literal">RC#</code> for Release Candidate and an incremental number in case the release process has to be done several times.</p><pre class="programlisting brush: shell">cd polygene-java
git flow release start "&lt;RELEASE-VERSION&gt;-RC#"</pre><p>This will eventually generates a <code class="literal">&lt;RELEASE-VERSION&gt;-RC#</code> tag that we will amend with a <code class="literal">&lt;RELEASE-VERSION&gt;</code> signed tag if the vote passes, see below.</p></div><div class="section" title="Audit artifacts and distributions"><div class="titlepage"><div><div><h5 class="title"><a id="_audit_artifacts_and_distributions"></a>Audit artifacts and distributions</h5></div></div></div><p>Make a complete build, deploying maven artifacts locally:</p><pre class="programlisting brush: shell">cd polygene-java
./gradlew -Dversion="&lt;RELEASE-VERSION&gt;" assemble</pre><p>Review maven artifacts in <code class="literal">distributions/build/stage/maven-binaries</code>.</p><p>Also review the release distributions in <code class="literal">distributions/build/distributions</code> where you should find the following files:</p><pre class="programlisting brush: shell">.
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.MD5
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.SHA-512
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.asc
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.MD5
├── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.SHA-512
└── apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.asc</pre><p>If any, make the required changes, commit them and iterate.</p></div><div class="section" title="Close the RC branch"><div class="titlepage"><div><div><h5 class="title"><a id="_close_the_rc_branch"></a>Close the RC branch</h5></div></div></div><p>Once you are satisfied with the produced artifacts, close the release candidate branch:</p><pre class="programlisting brush: shell">cd polygene-java
git flow release finish "&lt;RELEASE-VERSION&gt;-RC#"</pre></div><div class="section" title="Checkout the RC tag"><div class="titlepage"><div><div><h5 class="title"><a id="_checkout_the_rc_tag"></a>Checkout the RC tag</h5></div></div></div><p>To build the release candidate bits, we need to checkout the release candidate tag, that will eventually be promoted as a signed release tag, because the Apache Polygene™ build system generates versionning information based on git metadata.</p><pre class="programlisting brush: shell">cd polygene-java
git checkout "&lt;RELEASE-VERSION&gt;-RC#"</pre></div><div class="section" title="Build RC artifacts and distributions"><div class="titlepage"><div><div><h5 class="title"><a id="_build_rc_artifacts_and_distributions"></a>Build RC artifacts and distributions</h5></div></div></div><pre class="programlisting brush: shell">cd polygene-java
./gradlew -Dversion="&lt;RELEASE-VERSION&gt;" clean assemble</pre></div><div class="section" title="Stage RC maven artifacts"><div class="titlepage"><div><div><h5 class="title"><a id="_stage_rc_maven_artifacts"></a>Stage RC maven artifacts</h5></div></div></div><p>Stage artifacts to <a class="ulink" href="https://repository.apache.org/" target="_top">repository.apache.org</a> :</p><pre class="programlisting brush: shell">cd polygene-java
./gradlew -Dversion="&lt;RELEASE-VERSION&gt;" uploadArchives</pre><p>Close the staging Nexus repository by following the <a class="ulink" href="https://www.apache.org/dev/publishing-maven-artifacts.html#close-stage" target="_top">Closing the staged repository</a> guide.</p></div><div class="section" title="Stage NPM registry packages"><div class="titlepage"><div><div><h5 class="title"><a id="_stage_npm_registry_packages"></a>Stage NPM registry packages</h5></div></div></div><p>Publish the new version of the <code class="literal">generator-polygene</code> NPM package tagged as <code class="literal">beta</code>:</p><pre class="programlisting brush: shell">cd polygene-java
./gradlew tools:generator-polygene:prepareTemplateGradleWrapper
cd tools/generator-polygene
npm publish --tag beta</pre><p>If the release VOTE passes, we’ll remove the <code class="literal">beta</code> tag, making the new version available.</p><p>Then open <a class="ulink" href="https://www.npmjs.com/package/generator-polygene" target="_top">https://www.npmjs.com/package/generator-polygene</a> to check
that the new version was published and is tagged as <code class="literal">beta</code>.</p></div><div class="section" title="Upload RC distributions"><div class="titlepage"><div><div><h5 class="title"><a id="_upload_rc_distributions"></a>Upload RC distributions</h5></div></div></div><p>Source distribution, checksums and signatures must be uploaded to <a class="ulink" href="https://dist.apache.org/repos/dist/dev/polygene/" target="_top">dist.apache.org/repos/dist/dev/polygene</a>.
This build created these in the <code class="literal">buid/distributions</code> directory, named <code class="literal">apache-polygene-java-&lt;RELEASE-VERSION&gt;-src*.*</code>.
As this release still is a simple candidate, we’ll rename them before upload to advertise this in their names.</p><pre class="programlisting brush: shell"># Source ZIP
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.MD5" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.MD5"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.SHA-512" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.SHA-512"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.asc" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.asc"
# Source TAR.GZ
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.MD5" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.MD5"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.SHA-512" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.SHA-512"
cp "polygene-java/distributions/build/distributions/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.asc" \
   "polygene-dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.asc"</pre><p>And then upload them:</p><pre class="programlisting brush: shell">cd polygene-dist/dev/polygene
svn add * --force
svn commit -m "polygene: upload &lt;RELEASE-VERSION&gt;-RC# to dist/dev/polygene"</pre></div></div><div class="section" title="Run the vote"><div class="titlepage"><div><div><h4 class="title"><a id="_run_the_vote"></a>Run the vote</h4></div></div></div><p>Send a "VOTE" to the <a class="ulink" href="mailto:dev@polygene.apache.org" target="_top">developer mailing list</a> including links to release artifacts. A VOTE always contains two parts. Send an email to the developer mailing list with the subject line:</p><pre class="programlisting brush: text">[VOTE] Release Polygene (Java Edition) version &lt;RELEASE-VERSION&gt;</pre><p>Here is a sample template:</p><pre class="programlisting brush: text">Dear community,

I am happy to start the VOTE thread for Apache Polygene (Java Edition) &lt;RELEASE-VERSION&gt;!

The changelog for this release can be found here: https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12316820&amp;version=12332997

Tag: https://git-wip-us.apache.org/repos/asf?p=polygene-java.git;a=tag;h=refs/tags/&lt;RELEASE-VERSION&gt;-RC#

The distributions to be voted on are located here: https://dist.apache.org/repos/dist/dev/polygene/

Convenience artifacts in a maven repository are staged here: https://repository.apache.org/content/groups/staging/org/apache/polygene/

Release distributions and convenience artifacts are signed with the following key: https://dist.apache.org/repos/dist/dev/polygene/KEYS

Some guidance on how to validate distributions and artifacts can be found here: https://polygene.apache.org/java/develop/releasing-apache.html#_verifying_a_release_candidate

Please vote on releasing this package as Apache Polygene (Java Edition) &lt;RELEASE-VERSION&gt;.

The vote is open for the next 72 hours and passes if a majority of at least three +1 PMC votes are cast and there must be more positive than negative votes.

[ ] +1 Release Apache Polygene (Java Edition) &lt;RELEASE-VERSION&gt;
[ ]  0 I don't have a strong opinion about this, but I assume it's ok
[ ] -1 Do not release Apache Polygene (Java Edition) &lt;RELEASE-VERSION&gt; because...

Cheers</pre><p>After the vote is over, send a "RESULT" email to the list with the subject line:</p><pre class="programlisting brush: text">[RESULT][VOTE] Release Polygene (Java Edition) version &lt;RELEASE-VERSION&gt;</pre><p>Here is a sample template:</p><pre class="programlisting brush: text">To: "Polygene Developers List" &lt;dev@polygene.apache.org&gt;
CC: "Polygene Project Management Committee List" &lt;private@polygene.apache.org&gt;
Subject: [RESULT][VOTE] Release Polygene (Java Edition) version &lt;RELEASE-VERSION&gt;

Hi,

The vote has passed|failed with the following result:

+1 (binding): &lt;&lt;list of names&gt;&gt;
+1 (non binding): &lt;&lt;list of names&gt;&gt;

I will promote|drop the distributions and artifacts.</pre><p>Votes on whether a package is ready to be released use majority approval — i.e., at least three PMC members must vote affirmatively for release, and there must be more positive than negative votes.</p></div><div class="section" title="Verifying a Release Candidate"><div class="titlepage"><div><div><h4 class="title"><a id="_verifying_a_release_candidate"></a>Verifying a Release Candidate</h4></div></div></div><p>In order to verify a Apache Polygene™ (Java Edition) release candidate you’ll need valid <code class="literal">wget</code>, <code class="literal">md5sum</code>, <code class="literal">shasum</code> with support for SHA-5.12, GnuPG and Java JDK &gt;= 7 installations.</p><p>If the setup feels like a chore, keep reading, you probably already have what’s needed for some of the checks.
A single check is better than none.</p><div class="section" title="Download RC"><div class="titlepage"><div><div><h5 class="title"><a id="_download_rc"></a>Download RC</h5></div></div></div><p>First go downloading the release candidate distributions from <a class="ulink" href="https://dist.apache.org/repos/dist/dev/polygene/" target="_top">dist.a.o/repos/dist/dev/polygene</a>.
Including <code class="literal">*.MD5</code>, <code class="literal">*.SHA-512</code> and <code class="literal">*.asc</code> files.
Put them in a directory:</p><pre class="programlisting brush: shell">cd polygene-check-rc
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.MD5
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.SHA-512
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.asc
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.MD5
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.SHA-512
wget https://dist.apache.org/repos/dist/dev/polygene/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.asc</pre></div><div class="section" title="Verify RC signatures"><div class="titlepage"><div><div><h5 class="title"><a id="_verify_rc_signatures"></a>Verify RC signatures</h5></div></div></div><p>Verify PGP signatures:</p><pre class="programlisting brush: shell">cd polygene-check-rc
gpg apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.asc
gpg apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.asc</pre><p>This must output <code class="literal">gpg: Good signature from "Signer Name &lt;signer@ema.il&gt;"</code> for each distribution.</p><p>Verify MD5 checksum:</p><pre class="programlisting brush: shell">cd polygene-check-rc
echo "$(cat apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.MD5) apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz" | md5sum -c -
echo "$(cat apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.MD5) apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip" | md5sum -c -</pre><p>This must output <code class="literal">some-filename: OK</code> for each distribution.</p><p>Verify SHA-512 checksum:</p><pre class="programlisting brush: shell">cd polygene-check-rc
echo "$(cat apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.MD5)  apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz" | shasum -a 512 -c -
echo "$(cat apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.MD5)  apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip" | shasum -a 512 -c -</pre><p>This also must output <code class="literal">some-filename: OK</code> for each distribution.</p></div><div class="section" title="Verify source distribution"><div class="titlepage"><div><div><h5 class="title"><a id="_verify_source_distribution"></a>Verify source distribution</h5></div></div></div><p>Unpack the source distributions, we will use the <code class="literal">zip</code> distribution here, both should be checked.</p><pre class="programlisting brush: shell">cd polygene-check-rc
unzip apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip
cd apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src</pre><p><span class="strong"><strong>LICENSE &amp; NOTICE</strong></span></p><p>Review <code class="literal">LICENSE</code> and <code class="literal">NOTICE</code> file(s) ;
see the Apache’s <a class="ulink" href="https://www.apache.org/dev/licensing-howto.html" target="_top">Licensing Howto</a>.</p><p>Tools like <a class="ulink" href="https://creadur.apache.org/rat/" target="_top">Apache Rat™</a> and other projects from <a class="ulink" href="https://creadur.apache.org/" target="_top">Apache Creadur™</a> can come in handy.
You can also <code class="literal">grep</code> the whole source tree.</p><p><span class="strong"><strong>Build RC from sources</strong></span></p><pre class="programlisting brush: shell">cd polygene-check-rc/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src
./gradlew assemble check</pre></div></div><div class="section" title="VOTE passes"><div class="titlepage"><div><div><h4 class="title"><a id="_vote_passes"></a>VOTE passes</h4></div></div></div><div class="section" title="Seal the release"><div class="titlepage"><div><div><h5 class="title"><a id="_seal_the_release"></a>Seal the release</h5></div></div></div><p>Create and sign the release git tag from the unsigned release candidate tag:</p><pre class="programlisting brush: shell">cd polygene-java
git tag -s "&lt;RELEASE-VERSION&gt;" "&lt;RELEASE-VERSION&gt;-RC#"</pre><p>Push all git changes:</p><pre class="programlisting brush: shell">cd polygene-java
git checkout master
git push origin master
git checkout develop
git push origin master
git push origin --tags</pre></div><div class="section" title="Publish bits"><div class="titlepage"><div><div><h5 class="title"><a id="_publish_bits"></a>Publish bits</h5></div></div></div><p>Promote the staged Nexus repository so it gets synched to Maven Central by following the <a class="ulink" href="https://www.apache.org/dev/publishing-maven-artifacts.html#promote" target="_top">Promoting a repo</a> guide.</p><p>Move the release distributions, checksums and signatures from <a class="ulink" href="https://dist.apache.org/repos/dist/dev/polygene/" target="_top">polygene-dist/dev/polygene</a> to <a class="ulink" href="https://dist.apache.org/repos/dist/release/polygene/" target="_top">polygene-dist/release/polygene</a>:</p><pre class="programlisting brush: shell">cd polygene-dist
# Source ZIP TODO
export DIST_DEV_URL="https://dist.apache.org/repos/dist/dev/polygene"
export DIST_RELEASE_URL="https://dist.apache.org/repos/dist/release/polygene"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.MD5" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.MD5" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.SHA-512" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.SHA-512" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.zip.asc" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.zip.asc" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
# Source TAR.GZ
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.MD5" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.MD5" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.SHA-512" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.SHA-512" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"
svn move "$DIST_DEV_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-RC#-src.tgz.asc" \
     "$DIST_RELEASE_URL/apache-polygene-java-&lt;RELEASE-VERSION&gt;-src.tgz.asc" \
     -m "polygene: promoting release &lt;RELEASE-VERSION&gt; distributions"</pre><p>This produces one commit per file but keep svn history and runs fast, without re-uploading the distributions.</p></div><div class="section" title="Wait 24 hours"><div class="titlepage"><div><div><h5 class="title"><a id="_wait_24_hours"></a>Wait 24 hours</h5></div></div></div><p>For mirrors to pick up the new bits.</p></div><div class="section" title="Prepare an announcement"><div class="titlepage"><div><div><h5 class="title"><a id="_prepare_an_announcement"></a>Prepare an announcement</h5></div></div></div><p>Coordinate a press release with <a class="ulink" href="mailto:press@apache.org" target="_top">press@apache.org</a>.</p><pre class="literallayout">TODO</pre><p>You can reuse the release-notes content from the <code class="literal">txt</code>/<code class="literal">adoc</code>/<code class="literal">md</code> files created earlier.</p><p>This annoucement will be used in a variety of media like emails, websites etc…
Start with a text version and once satisfied create at least a Markdown version for the website, see below.</p></div><div class="section" title="Publish generator-polygene to the NPM registry"><div class="titlepage"><div><div><h5 class="title"><a id="_publish_literal_generator_polygene_literal_to_the_npm_registry"></a>Publish <code class="literal">generator-polygene</code> to the NPM registry</h5></div></div></div><pre class="programlisting brush: shell">npm dist-tag rm generator-polygene beta</pre><p>Then open <a class="ulink" href="https://www.npmjs.com/package/generator-polygene" target="_top">https://www.npmjs.com/package/generator-polygene</a> to check
that the package is not tagged as <code class="literal">beta</code> anymore.</p></div><div class="section" title="Update the Polygene™ website"><div class="titlepage"><div><div><h5 class="title"><a id="_update_the_polygene_website"></a>Update the Polygene™ website</h5></div></div></div><p>Generate the documentation and javadoc minisite:</p><pre class="programlisting brush: shell">cd polygene-java
./gradlew -Dversion="&lt;RELEASE-VERSION&gt;" copyAsfDocumentation</pre><p>This will automatically put all files into the <code class="literal">polygene-website</code> website repository.</p><p>Create a new post on the Polygene™ website by creating a new Markdown file:</p><pre class="programlisting brush: shell">cd polygene-website
touch "src/_posts/YYYY-MM-DD-apache-polygene-java-&lt;RELEASE-VERSION&gt;.md"
open !$</pre><p>You can reuse the Markdown formatted announcement content.</p><p>Add the new released version in <code class="literal">polygene-website/site/content/java/versions.json</code> below the <code class="literal">latest</code> entry:</p><pre class="programlisting brush: js">{
    "develop": "develop",
    "latest": "latest",
    "&lt;RELEASE-VERSION&gt;", "&lt;RELEASE-VERSION&gt;",
    "2.0": "2.0",
    "&lt;=1.4.x": "1.4"
}</pre><p>Finally, edit <code class="literal">polygene-website/site/src/_data/releases.yml</code> with the new release data.
Upmost is the latest:</p><pre class="programlisting brush: text">- version: &lt;RELEASE-VERSION&gt;
  announcement: YYYY/MM/DD/apache-polygene-java-&lt;RELEASE-VERSION&gt;
  signer: John Doe
  pgpId: FB751943</pre><p>You can run the Polygene™ website locally:</p><pre class="programlisting brush: shell">cd polygene-website
jekyll serve</pre><p>Open <a class="ulink" href="http://127.0.0.1:4000/" target="_top">http://127.0.0.1:4000/</a> to live-preview your changes.</p><p>Once you are satisfied with the changes, build the production website:</p><pre class="programlisting brush: shell">cd polygene-website
jekyll build</pre><p>Link <code class="literal">/latest</code> to the latest release:</p><pre class="programlisting brush: shell">cd polygene-website/content/java
ln -s &lt;RELEASE_VERSION&gt; latest</pre><p>And publish it:</p><pre class="programlisting brush: shell">cd polygene-website
git add .
git commit -m "update website"
git push</pre></div><div class="section" title="Register the release"><div class="titlepage"><div><div><h5 class="title"><a id="_register_the_release"></a>Register the release</h5></div></div></div><p>Register the new release at <a class="ulink" href="https://reporter.apache.org/" target="_top">reporter.apache.org</a></p></div><div class="section" title="Announce"><div class="titlepage"><div><div><h5 class="title"><a id="_announce"></a>Announce</h5></div></div></div><p>Finally, send an announcement to <a class="ulink" href="mailto:dev@polygene.apache.org" target="_top">dev@</a> mailing list. Email announcements should have the subject line:</p><pre class="programlisting brush: text">[ANNOUNCE] Released Polygene (Java Edition) version &lt;RELEASE-VERSION&gt;</pre><p>The announcement email should contains the release-notes as text, remember they are in the <code class="literal">apache-polygene-java-&lt;RELEASE-VERSION&gt;-release-notes.txt</code> file you created earlier.</p></div></div><div class="section" title="VOTE fails or is cancelled"><div class="titlepage"><div><div><h4 class="title"><a id="_vote_fails_or_is_cancelled"></a>VOTE fails or is cancelled</h4></div></div></div><div class="section" title="Record failure"><div class="titlepage"><div><div><h5 class="title"><a id="_record_failure"></a>Record failure</h5></div></div></div><p>We keep the release candidate git history.
It can be useful for reviewers to have access to it.
Remember, we created a release candidate branch and tags, no signed release tag.</p><pre class="programlisting brush: shell">cd polygene-java
git checkout master
git push origin master
git checkout develop
git push origin master
git push origin --tags</pre></div><div class="section" title="Drop RC artifacts and distributions"><div class="titlepage"><div><div><h5 class="title"><a id="_drop_rc_artifacts_and_distributions"></a>Drop RC artifacts and distributions</h5></div></div></div><p>Drop the Nexus staging repository by following the <a class="ulink" href="https://www.apache.org/dev/publishing-maven-artifacts.html#drop" target="_top">Dropping a repo</a> guide.</p><p>Drop distributions, checksums and signatures from <a class="ulink" href="https://dist.apache.org/repos/dist/dev/polygene/" target="_top">polygene-dist/dev/polygene</a></p><pre class="programlisting brush: shell">cd polygene-dist/dev/polygene/
svn rm "*&lt;RELEASE-VERSION&gt;-RC#*.*"
svn commit -m "polygene: dropping &lt;RELEASE-VERSION&gt;-RC# from dist/dev/polygene as the vote failed/was cancelled"</pre><p>Drop NPM packages:</p><pre class="programlisting brush: shell">npm unpublish generator-polygene@&lt;RELEASE-VERSION&gt;</pre></div><div class="section" title="Start over"><div class="titlepage"><div><div><h5 class="title"><a id="_start_over"></a>Start over</h5></div></div></div><p>If a new RC is to be created, restart the process as described above.</p></div></div></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="footer"><p>
        Copyright © 2015 The Apache Software Foundation, Licensed under the <a href="http://www.apache.org/licenses/" target="_blank">Apache License, Version 2.0</a>.
        <br /><small>
            Apache Polygene, Polygene, Apache, the Apache feather logo, and the Apache Polygene project logo are trademarks of The Apache Software Foundation.<br />
            All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </small></p></div></body></html>